package com.wms.abstractclient.module.modules.exploit;

import com.wms.abstractclient.event.PacketSendEvent;
import com.wms.abstractclient.module.Module;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.lwjgl.input.Keyboard;

public class LiveOverflowDisabler extends Module {
    public LiveOverflowDisabler() {
        super("LiveOverflowDisabler", Category.EXPLOIT, Keyboard.KEY_NONE);
    }
    @SubscribeEvent
    public void onPacket(final PacketSendEvent e){
        if(nullcheck()){return;}

        Packet<?> packet = e.getPacket();

        if(packet instanceof CPacketPlayer.Position ||packet instanceof CPacketPlayer.PositionRotation) {
            CPacketPlayer pos = (CPacketPlayer) e.getPacket();
            double x = ((int) (pos.getX(mc.player.posX) * 100)) / 100.0;
            double y = ((int) (pos.getY(mc.player.posZ) * 100)) / 100.0;
            double z = ((int) (pos.getZ(mc.player.posZ) * 100)) / 100.0;
            ((CPacketPlayer) e.getPacket()).x = x;
            ((CPacketPlayer) e.getPacket()).y = y;
            ((CPacketPlayer) e.getPacket()).z = z;
        }
    }
}
